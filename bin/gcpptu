#!/bin/bash

if [ $# -lt 2 ]; then
    echo "USAGE: gcpp <pattern> <path> <grep-args>"
    exit 1
fi

PATH_TO_SEARCH=$1
PATTERN=`echo $2 | sed -e 's/ /\\\\ /g'`
shift 2
EXTRA_GREP_ARGS=$@

find_srcs ${PATH_TO_SEARCH} | grep -v Test_modules | grep -v "${PATTERN}" | xargs -I filename grep --color -Hn "${PATTERN}" filename ${EXTRA_GREP_ARGS}

