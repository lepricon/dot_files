#!/bin/bash

if [ $# -lt 2 ]; then
    echo "USAGE: g <pattern> <path> <grep-args>"
    exit 1
fi

PATH_TO_SEARCH=$1
PATTERN=`echo $2 | sed -e 's/ /\\\\ /g'`
shift 2
EXTRA_GREP_ARGS=$3

find ${PATH_TO_SEARCH} | grep -v "\.svn" | xargs -I@ grep --binary-files=without-match --color -Hn "${PATTERN}" @ ${EXTRA_GREP_ARGS}

