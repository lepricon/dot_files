# LTE project specific scripts


BUILD_LOG_FILE="/tmp/mgmake-build-log"

function default_make_target_to_UEC()
{
    if [ $# -eq 0 ]; then
        echo "UEC" 
    else
        echo "$1"
    fi
}

function mgmake()
{
    make -f Makefile $@ 2>&1 | tee $BUILD_LOG_FILE
}

function mu()
{
    TARGET=$(default_make_target_to_UEC $@)
    shift
    mgmake pt${TARGET}_UT $@ 2>&1 | tee $BUILD_LOG_FILE
}

function mur()
{
    mgmake ut-run$@
}

function me()
{
    TARGET=$(default_make_target_to_UEC $@)
    shift
    mgmake pt${TARGET}exe SECONDARY=1 $@ 2>&1 | tee $BUILD_LOG_FILE
}

function msc()
{
    TARGET=$(default_make_target_to_UEC $@)
    shift
    mgmake SECONDARY=1 SC=${TARGET} sct-clean-logs sct-coal $@
}

function msr()
{
    TARGET=$1
    shift
    mgmake SECONDARY=1 SC=${TARGET} sct-clean-logs sct-run $@
}

function med()
{
    me && msc
}

function mud()
{
    mu && mur
}

function mie()
{
    mgmake interfaces-all externals
}

function mt()
{
    mgmake ctags
}

function git_branch_name () { git br | grep "*" | cut -d" " -f2; }
function svndiff () { svn diff $@ | $HOME/ide/colordiff-1.0.10/colordiff.pl; }
function svndiffless () { svn diff $@ | $HOME/ide/colordiff-1.0.10/colordiff.pl | less -R; }
function svndiffvim () { svn diff --diff-cmd=$HOME/bin/svndiffvimdiff.sh $@; }
function svndiffvimhelper () { svn diff --diff-cmd=$HOME/bin/svndiff_vim_helper $@; }
function colordiff () { diff $@ | $HOME/ide/colordiff-1.0.10/colordiff.pl; }

function xte()
{
    xterm -into $( cat ~/.tabbed.xid ) &
}

function v()
{
    FILE_NAME=`echo "$1" | cut -d":" -f1`
    LINE_NUMBER=`echo "$1" | cut -d":" -f2`
    echo "$1" | grep ":" > /dev/null
    if [ $? -eq 0 ]; then
        PARAMS="$FILE_NAME +$LINE_NUMBER"
    else
        PARAMS="$FILE_NAME"
    fi
    vim $PARAMS
}

function vf()
{
    FILE_NAME_SHORT=`echo "$1" | cut -d":" -f1`
    LINE_NUMBER=`echo "$1" | cut -d":" -f2`
    FILE_NAME_LONG=`find ./Source/ -name $FILE_NAME_SHORT`
    vim $FILE_NAME_LONG +$LINE_NUMBER
}

function vv()
{
    LOG_FILE_PATH=$1
    vim -c "/Final Verdict:" `find $LOG_FILE_PATH -name *.k3.txt`
}

function ve()
{
    vim -c \"Cscope e $1\"
}

function settitle()
{
    if [ $# -lt 1 ]; then
        PROMPT_COMMAND='\
            echo -ne "\033]0;`basename "$PWD"`@`hostname`\007";\
            echo -ne "\033]1;`basename "$PWD"`@`hostname`\007"'
    else
        PROMPT_COMMAND="$1"
    fi
}

